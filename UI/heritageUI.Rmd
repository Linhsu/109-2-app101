---
drake_cache: ".heritageUI"
---

# Materialized Framework

```{r makecondition}
library(dplyr)
library(htmltools)
library(econR)
web <- Web()
.root <- rprojroot::is_rstudio_project$make_fix_file()
```

### Body Tags

  * <https://pin.it/5EsttTc>

```{r}
magick::image_read("https://i.pinimg.com/564x/3d/b4/07/3db407c7a392fc1bfd96524b618da228.jpg")
```

  * Tabs on top 
  
  * Subcat info on bottom


#### Tabs on top


```{r tabs_prototype, drake=F}
tabs_prototype <- 
  htmltools::HTML('
 <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a href="#test1">Test 1</a></li>
        <li class="tab col s3"><a class="active" href="#test2">Test 2</a></li>
        <li class="tab col s3 disabled"><a href="#test3">Disabled Tab</a></li>
        <li class="tab col s3"><a href="#test4">Test 4</a></li>
      </ul>
    </div>
    <div id="test1" class="col s12">Test 1</div>
    <div id="test2" class="col s12">Test 2</div>
    <div id="test3" class="col s12">Test 3</div>
    <div id="test4" class="col s12">Test 4</div>
  </div>
')
```



```{r tabs_prototype}
tabs_prototype <- 
 tags$div(class="row", 
    tags$div(class="col s12", 
      tags$ul(class="tabs", 
        tags$li(class="tab col s3", tags$a(href="#test1"," 地區")),
        tags$li(class="tab col s3", tags$a(class="active", href="#test2"," Test 2")),
        tags$li(class="tab col s3 disabled", tags$a(href="#test3"," Disabled Tab")),
        tags$li(class="tab col s3", tags$a(href="#test4"," Test 4"))
      )
    ),
    tags$div(id="test1", class="col s12"," Test 1"),
    tags$div(id="test2", class="col s12"," Test 2"),
    tags$div(id="test3", class="col s12"," Test 3"),
    tags$div(id="test4", class="col s12"," Test 4")
  )

```


#### Subcat info on bottom

```{r}

```

#### bodyTags

```{r bodyTags}
bodyTags <- {
  htmltools::tagList(
    # navbar_on_top_prototype,
    tabs_prototype
  )
}
```


## HTML Placeholder

```{r html_placeholder}
html_placeholder <- tags$html(
  tags$head(
    do.call(htmltools::tagList, headTags),
    tags$meta(
      name="viewport",
      content="width=device-width, initial-scale=1.0"
    )
  ),
  tags$body(
    do.call(htmltools::tagList, bodyTags) #,
    # documentReadyJS
  )
)
```

## JS document loaded

```{r tabs_prototype_js, drake=F}
tabs_prototype_js <- 
'
var el_tabs = document.querySelector(".tabs")
var instance_tabs = M.Tabs.init(el_tabs);'
```

```{r documentReadyJS, drake=F}
documentReadyJS <- 
  htmltools::tags$script(
    paste0(
      c("document.addEventListener('DOMContentLoaded', function() {\n",
      tabs_prototype_js,
      "\n});"), collapse = "\n")
  )

```

### Head Tags

```{r headTags}
headTags <- {
  list(
    htmltools::tags$link(
      href="https://fonts.googleapis.com/icon?family=Material+Icons",
      rel="stylesheet"
    )
  )
}
```

## Dependencies (Optional)

Materialized framework{-}

```
<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
            
```

#### Define dependency

```{r myDependency}
myDependency <- htmltools::htmlDependency(
  name="myown",
  version="1.0",
  src=c(filepath=.root()),
  stylesheet = "css/mystyle.css",
  script = "js/mydesign.js",
  head = '<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+TC">
'
)
```

#### Attach dependency


```{r html_complete}
html_complete <- 
  htmltools::tagList(
    html_placeholder,
    web$htmlDependencies$materialise(),
    myDependency
  )
```


```{r}
htmltools::browsable(
  html_complete
  )
```


## Save

```{r save_html}
htmltools::save_html(
  html_complete, 
  file = file.path(
    "/Users/martinl/Github/109-2-app101/docs",
    "index.html"
  ),
  libdir="lib"
)
```

  * **file** can not be in the same folder of the source Rmd file; it will create non-stop nested libdir. 
