---
drake_cache: ".heritageUI"
---

# Materialized Framework

```{r makecondition}
library(dplyr)
library(htmltools)
library(econR)
web <- Web()
```

  * If you don't see `web` object, please update your **econR** package via `remotes::install_github("tpemartin/econR", force=T)`.

### Body Tags

  * <https://pin.it/5EsttTc>

```{r}
magick::image_read("https://i.pinimg.com/564x/3d/b4/07/3db407c7a392fc1bfd96524b618da228.jpg")
```

  * Tabs on top 
  

#### Tabs on top


```{r tabs_prototype, drake=F}
tabs_prototype <- 
  htmltools::HTML('
 <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a href="#test1">Test 1</a></li>
        <li class="tab col s3"><a class="active" href="#test2">Test 2</a></li>
        <li class="tab col s3 disabled"><a href="#test3">Disabled Tab</a></li>
        <li class="tab col s3"><a href="#test4">Test 4</a></li>
      </ul>
    </div>
    <div id="test1" class="col s12">Test 1</div>
    <div id="test2" class="col s12">Test 2</div>
    <div id="test3" class="col s12">Test 3</div>
    <div id="test4" class="col s12">Test 4</div>
  </div>
')
```

```{r}
convertHTML2RTags(tabs_prototype)
```

```{r}

 tags$div(class="row", 
    tags$div(class="col s12", 
      tags$ul(class="tabs", 
        tags$li(class="tab col s3", tags$a(href="#test1"," Test 1")),
        tags$li(class="tab col s3", tags$a(class="active", href="#test2"," Test 2")),
        tags$li(class="tab col s3 disabled", tags$a(href="#test3"," Disabled Tab")),
        tags$li(class="tab col s3", tags$a(href="#test4"," Test 4"))
      )
    ),
    tags$div(id="test1", class="col s12"," Test 1"),
    tags$div(id="test2", class="col s12"," Test 2"),
    tags$div(id="test3", class="col s12"," Test 3"),
    tags$div(id="test4", class="col s12"," Test 4")
  )

```


```{r tabs_prototype}
tabs_prototype <- 
tags$div(class="container",
 tags$div(class="row", 
    tags$div(class="col s12", 
      tags$ul(class="tabs", 
        tags$li(class="tab col s3", tags$a(href="#test1"," 地區")),
        tags$li(class="tab col s3", tags$a(class="active", href="#test2"," Test 2")),
        tags$li(class="tab col s3 disabled", tags$a(href="#test3"," Disabled Tab")),
        tags$li(class="tab col s3", tags$a(href="#test4"," Test 4"))
      )
    ),
    tags$div(id="test1", class="col s12"," Test 1"),
    tags$div(id="test2", class="col s12"," Test 2"),
    tags$div(id="test3", class="col s12"," Test 3"),
    tags$div(id="test4", class="col s12"," Test 4")
  ))

```

#### footer

```{r footer_proto}
footer_proto <-htmltools::HTML( '  <footer class="page-footer">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            © 2014 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
            </div>
          </div>
        </footer>')

```

```{r}
drake$loadTarget$footer_proto()

as.character(footer_proto) %>%
  convertHTML2RTags() # will translate HTML to R tag codes which will be written to clipboard for pasting.
```

```{r footer}
footer <-   tags$footer(class="page-footer", 
          tags$div(class="container", 
            tags$div(class="row", 
              tags$div(class="col l6 s12", 
                tags$h5(class="white-text"," Footer Content"),
                tags$p(class="grey-text text-lighten-4", "You can use rows and columns here to organize your footer content.")
              ),
              tags$div(class="col l4 offset-l2 s12", 
                tags$h5(class="white-text"," Links"),
                tags$ul( 
                  tags$li( tags$a(class="grey-text text-lighten-3", href="#!"," Link 1")),
                  tags$li( tags$a(class="grey-text text-lighten-3", href="#!"," Link 2")),
                  tags$li( tags$a(class="grey-text text-lighten-3", href="#!"," Link 3")),
                  tags$li( tags$a(class="grey-text text-lighten-3", href="#!"," Link 4"))
                )
              )
            )
          ),
          tags$div(class="footer-copyright", 
            tags$div(class="container", 
            "© 2014 Copyright Text",
            tags$a(class="grey-text text-lighten-4 right", href="#!"," More Links")
            )
          )
        )
```

```{r footer, drake=F}
footer <-   tags$footer(class="page-footer", 
          tags$div(class="container", 
            tags$div(class="row", 
              tags$div(class="col l6 s12", 
                tags$h5(class="white-text"," Footer Content"),
                tags$p(class="grey-text text-lighten-4", "You can use rows and columns here to organize your footer content.")
              ),
              tags$div(class="col l4 offset-l2 s12", 
                tags$h5(class="white-text"," Links"),
                tags$ul(
                  tags$li(tags$a(class="grey-text text-lighten-3", href="#!"," Link 1")),
                  tags$li(tags$a(class="grey-text text-lighten-3", href="#!"," Link 2")),
                  tags$li(tags$a(class="grey-text text-lighten-3", href="#!"," Link 3")),
                  tags$li(tags$a(class="grey-text text-lighten-3", href="#!"," Link 4"))
                )
              )
            )
          ),
          tags$div(class="footer-copyright", 
            tags$div(class="container", 
           " © 2014 Copyright Text",
            tags$a(class="grey-text text-lighten-4 right", href="#!"," More Links")
            )
          )
        )
```


#### bodyTags

```{r bodyTags}
bodyTags <- {
  htmltools::tagList(
    # navbar_on_top_prototype,
    tabs_prototype,
    footer
  )
}
```


## HTML Placeholder

```{r html_placeholder}
html_placeholder <- tags$html(
  tags$head(
    do.call(htmltools::tagList, headTags),
    tags$meta(
      name="viewport",
      content="width=device-width, initial-scale=1.0"
    )
  ),
  tags$body(
    do.call(htmltools::tagList, bodyTags) #,
    # documentReadyJS
  )
)
```

### Head Tags

```{r headTags}
headTags <- {
  htmltools::tagList(
    htmltools::tags$link(
      href="https://fonts.googleapis.com/icon?family=Material+Icons",
      rel="stylesheet"
    )
  )
}
```

## Dependencies

Materialized framework{-}

```
<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
            
```

```{r}
web$htmlDependencies$materialise
```


#### Define dependency

```{r myDependency}
myDependency <- htmltools::htmlDependency(
  name="myown",
  version="1.0",
  src=c(filepath=.root()),
  stylesheet = "css/mystyle.css",
  script = "js/mydesign.js",
  head = '<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+TC">
'
)
```


#### Attach dependency


```{r html_complete}
html_complete <- 
  htmltools::tagList(
    html_placeholder,
    web$htmlDependencies$materialise(),
    web$htmlDependencies$jquery(),
    myDependency
  )
```


```{r}
htmltools::browsable(
  html_complete
  )
```


## Save

```{r save_html}
drake::file_in("css/mystyle.css")
drake::file_in("js/mydesign.js")
htmltools::save_html(
  html_complete, 
  file = file.path(
    web$output_path(),
    "index.html"
  ),
  libdir="lib"
)
```

  * **file** can not be in the same folder of the source Rmd file; it will create non-stop nested libdir. 
